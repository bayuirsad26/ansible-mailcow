[Service]
# Set memory and CPU limits for Docker daemon
MemoryLimit={{ docker_memory_limit }}
CPUQuota={{ docker_cpu_limit * 100 }}%

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/var/lib/docker /var/run/docker.sock
ProtectKernelTunables=true
ProtectKernelModules=true
ProtectControlGroups=true
RestrictRealtime=true
RestrictSUIDSGID=true
LockPersonality=true

# Restart policy
Restart=always
RestartSec=10
